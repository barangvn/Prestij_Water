<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Su Arıtma Takip Sistemi</title>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.5);
        }
        .modal-content {
            background-color: #fff;
            margin: 10% auto;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            width: 90%;
            max-width: 800px;
            position: relative;
        }
        .modal-close-button {
            position: absolute;
            top: 10px;
            right: 15px;
            color: #aaa;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }
        .modal-close-button:hover,
        .modal-close-button:focus {
            color: #000;
            text-decoration: none;
        }
        .table-container {
            overflow-x: auto;
            max-height: 500px;
        }
        .table-container table {
            border-collapse: collapse;
            width: 100%;
            margin-bottom: 0;
        }
        .table-container th, .table-container td {
            padding: 12px 16px;
            border-bottom: 1px solid #ddd;
            text-align: left;
        }
        .table-container th {
            background-color: #f0f0f0;
            color: #333;
            font-weight: 600;
        }
        .table-container tbody tr:hover {
            background-color: #f5f5f5;
        }
        .form-group {
            margin-bottom: 1rem;
        }
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: #555;
            font-weight: 600;
            font-size: 0.9rem;
        }
        .form-group input, .form-group textarea, .form-group select {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #ddd;
            border-radius: 0.5rem;
            font-size: 0.9rem;
            transition: border-color 0.3s ease;
        }
        .form-group input:focus, .form-group textarea:focus, .form-group select:focus {
            outline: none;
            border-color: #4c51bf;
            box-shadow: 0 0 0 3px rgba(76, 81, 191, 0.16);
        }
        .form-group textarea {
            resize: vertical;
            min-height: 100px;
        }
        .btn-primary {
            background-color: #4c51bf;
            color: white;
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 0.5rem;
            font-size: 0.9rem;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        .btn-primary:hover {
            background-color: #3840a3;
        }
        .btn-outline {
            background-color: transparent;
            border: 1px solid #ddd;
            color: #333;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .btn-outline:hover {
            background-color: #f8f9fa;
            border-color: #4c51bf;
            color: #4c51bf;
        }
        .alert {
            padding: 1rem;
            margin-bottom: 1rem;
            border: 1px solid transparent;
            border-radius: 0.5rem;
            font-size: 0.9rem;
        }
        .alert-success {
            background-color: #d4edda;
            border-color: #c3e6cb;
            color: #155724;
        }
        .alert-danger {
            background-color: #f8d7da;
            border-color: #f5c6cb;
            color: #721c24;
        }
        .hidden {
            display: none;
        }
        .space-y-4 > * + * {
            margin-top: 1rem;
        }
        .grid-cols-2 {
            grid-template-columns: repeat(2, minmax(0, 1fr));
        }
        .grid-cols-3 {
            grid-template-columns: repeat(3, minmax(0, 1fr));
        }
        @media (min-width: 768px) {
            .grid-cols-2 {
                grid-template-columns: repeat(2, minmax(0, 1fr));
            }
            .grid-cols-3 {
                grid-template-columns: repeat(3, minmax(0, 1fr));
            }
        }
        .text-left { text-align: left; }
        .text-center { text-align: center; }
        .font-semibold { font-weight: 600; }
        .uppercase { text-transform: uppercase; }
        .flex { display: flex; }
        .flex-col { flex-direction: column; }
        .justify-center { justify-content: center; }
        .space-x-2 > * + * { margin-left: 0.5rem; }
        .mt-1 { margin-top: 0.25rem; }
        .mt-4 { margin-top: 1rem; }
        .mb-4 { margin-bottom: 1rem; }
        .mb-6 { margin-bottom: 1.5rem; }
        .p-4 { padding: 1rem; }
        .p-6 { padding: 1.5rem; }
        .py-2 { padding-top: 0.5rem; padding-bottom: 0.5rem; }
        .px-3 { padding-left: 0.75rem; padding-right: 0.75rem; }
        .px-4 { padding-left: 1rem; padding-right: 1rem; }
        .py-3 { padding-top: 0.75rem; padding-bottom: 0.75rem; }
        .rounded-md { border-radius: 0.5rem; }
        .shadow-md { box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06); }
        .border { border: 1px solid #ddd; }
        .border-b { border-bottom: 1px solid #ddd; }
        .border-t { border-top: 1px solid #ddd; }
        .bg-gray-50 { background-color: #f9fafb; }
        .bg-gray-100 { background-color: #f0f0f0; }
        .text-gray-500 { color: #6b7280; }
        .text-gray-600 { color: #4b5563; }
        .text-gray-700 { color: #374151; }
        .text-gray-800 { color: #1f2937; }
        .text-gray-900 { color: #111827; }
        .text-white { color: #fff; }
        .bg-indigo-600 { background-color: #4c51bf; }
        .hover\:bg-indigo-700:hover { background-color: #3840a3; }
        .focus\:outline-none:focus { outline: none; }
        .focus\:ring-2:focus {
            box-shadow: 0 0 0 3px rgba(76, 81, 191, 0.16);
        }
        .focus\:ring-offset-2:focus {
            --tw-ring-offset-width: 2px;
            --tw-ring-offset-color: #fff;
        }
        .focus\:ring-indigo-500:focus {
            --tw-ring-color: #6366f1;
        }
        .bg-green-600 { background-color: #16a34a; }
        .hover\:bg-green-700:hover { background-color: #15803d; }
        .focus\:ring-green-500:focus {
             --tw-ring-color: #22c55e;
        }
        .bg-blue-600 { background-color: #2563eb; }
        .hover\:bg-blue-700:hover { background-color: #1e40af; }
        .focus\:ring-blue-500:focus {
            --tw-ring-color: #3b82f6;
        }
        .bg-red-600 { background-color: #dc2626; }
        .hover\:bg-red-700:hover { background-color: #b91c1c; }
        .focus\:ring-red-500:focus {
            --tw-ring-color: #f87171;
        }
        .w-full { width: 100%; }
        .sm\:text-sm { font-size: 0.875rem; line-height: 1.25rem; }
        .text-xs { font-size: 0.75rem; line-height: 1rem; }
        .block { display: block; }
        .inline-flex { display: inline-flex; }
        .items-center { align-items: center; }
        .h-5 { height: 1.25rem; }
        .w-5 { width: 1.25rem; }
        .rounded-full { border-radius: 9999px; }
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border-width: 0;
        }
    </style>
    <script>
        // Firebase yapılandırması (KENDİ BİLGİLERİNİZLE DEĞİŞTİRİN)
        const firebaseConfig = {
            apiKey: "YOUR_API_KEY",
            authDomain: "YOUR_AUTH_DOMAIN",
            databaseURL: "YOUR_DATABASE_URL",
            projectId: "YOUR_PROJECT_ID",
            storageBucket: "YOUR_STORAGE_BUCKET",
            messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
            appId: "YOUR_APP_ID"
        };

        // Firebase'i başlat
        const app = firebase.initializeApp(firebaseConfig);
        const db = app.database();
    </script>
</head>
<body>
    <div class="p-4 md:p-8">
        <h1 class="text-3xl font-bold mb-8 text-center text-gray-800">Su Arıtma Takip Sistemi</h1>
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <div class="bg-white p-6 rounded-lg shadow-md flex flex-col">
                <h2 class="text-2xl font-semibold mb-4 text-gray-700 border-b pb-2">Müşteri Yönetimi</h2>
                <div class="mb-4">
                    <label for="musteri-arama" class="sr-only">Müşteri Ara</label>
                    <input type="search" id="musteri-arama" placeholder="Müşteri Adı veya Telefon No Ara..."
                           class="block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm sm:text-sm focus:ring-indigo-500 focus:border-indigo-500">
                </div>
                <button id="yeni-musteri-goster-btn"
                        class="mb-4 w-full inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
                    + Yeni Müşteri Ekle
                </button>
                <form id="musteri-form" class="space-y-4 mb-6 hidden">
                    <h3 class="text-lg font-medium text-gray-600">Yeni Müşteri Bilgileri</h3>
                    <div class="form-group">
                        <label for="musteri-ad" class="block text-sm font-medium text-gray-700">Ad Soyad</label>
                        <input type="text" id="musteri-ad" required
                               class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm sm:text-sm">
                    </div>
                    <div class="form-group">
                        <label for="musteri-tel" class="block text-sm font-medium text-gray-700">Telefon Numarası *</label>
                        <input type="tel" id="musteri-tel" required
                               class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm sm:text-sm"
                               placeholder="örn: 5xxxxxxxxx">
                    </div>
                    <div class="form-group">
                        <label for="musteri-adres" class="block text-sm font-medium text-gray-700">Adres</label>
                        <textarea id="musteri-adres" rows="2" required
                                  class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm sm:text-sm"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="musteri-cihaz" class="block text-sm font-medium text-gray-700">Kullanılan Cihaz Adı</label>
                        <input type="text" id="musteri-cihaz" required
                               class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm sm:text-sm"
                               placeholder="örn: Model XYZ Ters Ozmoz">
                    </div>
                    <div class="form-group">
                        <label for="musteri-teknisyen" class="block text-sm font-medium text-gray-700">Varsayılan Teknisyen</label>
                        <input type="text" id="musteri-teknisyen" required
                               class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm sm:text-sm"
                               placeholder="örn: Ahmet Yılmaz">
                    </div>
                    <div class="flex justify-end space-x-2">
                        <button type="button" id="yeni-musteri-iptal-btn"
                                class="py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
                            İptal
                        </button>
                        <button type="submit"
                                class="inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
                            Müşteriyi Kaydet
                        </button>
                    </div>
                </form>
                <h3 class="text-lg font-medium text-gray-600 mb-2 mt-4">Mevcut Müşteriler</h3>
                <div class="table-container flex-grow border rounded-md overflow-hidden">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-100 sticky top-0">
                        <tr>
                            <th scope="col"
                                class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                Ad Soyad
                            </th>
                            <th scope="col"
                                class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                Telefon
                            </th>
                            <th scope="col"
                                class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                İşlemler
                            </th>
                        </tr>
                        </thead>
                        <tbody id="musteri-listesi" class="bg-white divide-y divide-gray-200">
                        <tr>
                            <td colspan="3" class="text-center py-10 text-gray-500">
                                Henüz müşteri eklenmemiş veya arama sonucu bulunamadı.
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="bg-white p-6 rounded-lg shadow-md flex flex-col">
                <h2 class="text-2xl font-semibold mb-4 text-gray-700 border-b pb-2">Stok Yönetimi</h2>
                <button id="yeni-urun-goster-btn"
                        class="mb-4 w-full inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500">
                    + Yeni Ürün Ekle
                </button>
                <form id="stok-form" class="space-y-4 mb-6 hidden">
                    <h3 class="text-lg font-medium text-gray-600">Yeni Ürün Bilgileri</h3>
                    <div class="form-group">
                        <label for="urun-ad" class="block text-sm font-medium text-gray-700">Ürün Adı</label>
                        <input type="text" id="urun-ad" required
                               class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm sm:text-sm"
                               placeholder="örn: 5 Mikron Sediment Filtre">
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div class="form-group">
                            <label for="stok-miktar" class="block text-sm font-medium text-gray-700">Stok Miktarı</label>
                            <input type="number" id="stok-miktar" required min="0"
                                   class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm sm:text-sm">
                        </div>
                        <div class="form-group">
                            <label for="min-stok" class="block text-sm font-medium text-gray-700">Min. Stok Seviyesi</label>
                            <input type="number" id="min-stok" required min="0" value="0"
                                   class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm sm:text-sm">
                        </div>
                    </div>
                    <div class="flex justify-end space-x-2">
                        <button type="button" id="yeni-urun-iptal-btn"
                                class="py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
                            İptal
                        </button>
                        <button type="submit"
                                class="inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500">
                            Ürünü Stoklara Ekle
                        </button>
                    </div>
                </form>
                <h3 class="text-lg font-medium text-gray-600 mb-2 mt-4">Stok Durumu</h3>
                <div class="table-container flex-grow border rounded-md overflow-hidden">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-100 sticky top-0">
                        <tr>
                            <th scope="col"
                                class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                Ürün Adı
                            </th>
                            <th scope="col"
                                class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                Miktar
                            </th>
                            <th scope="col"
                                class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                Min. Stok
                            </th>
                            <th scope="col"
                                class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                İşlemler
                            </th>
                        </tr>
                        </thead>
                        <tbody id="stok-listesi" class="bg-white divide-y divide-gray-200">
                        <tr>
                            <td colspan="4" class="text-center py-10 text-gray-500">Henüz ürün eklenmemiş.</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <div id="musteriDetayModal" class="modal">
            <div class="modal-content">
                <span class="modal-close-button" onclick="kapatModal('musteriDetayModal')">&times;</span>
                <h3 class="text-xl font-semibold mb-4 text-gray-800" id="modal-musteri-ad"></h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-3 text-sm text-gray-700 mb-6 pb-4 border-b">
                    <p><strong>Telefon:</strong> <span id="modal-musteri-tel"></span></p>
                    <p><strong>Kullanılan Cihaz:</strong> <span id="modal-musteri-cihaz"></span></p>
                    <p class="md:col-span-2"><strong>Adres:</strong> <span id="modal-musteri-adres"></span></p>
                    <p><strong>Varsayılan Teknisyen:</strong> <span id="modal-musteri-teknisyen"></span></p>
                </div>

                <div class="mb-6 p-4 border roun

                    function yeniMusteriEkle() {
  console.log("yeniMusteriEkle fonksiyonu başladı."); // Fonksiyon çalışıyor mu?
  var musteriAdi = document.getElementById('musteriAdiInput').value;
  var musteriTel = document.getElementById('musteriTelInput').value;
  console.log("Müşteri Adı:", musteriAdi); // Değerler doğru alınıyor mu?
  console.log("Müşteri Tel:", musteriTel);

  var musteriData = {
    ad: musteriAdi,
    telefon: musteriTel,
    eklenmeTarihi: new Date().toString()
  };
  console.log("Gönderilecek Veri:", musteriData); // Gönderilecek obje doğru mu?

  var databaseRef = firebase.database().ref('musteriler');
  console.log("Veritabanı Referansı:", databaseRef.toString()); // Referans doğru mu?

  databaseRef.push(musteriData)
    .then(function() {
      console.log("Veri başarıyla eklendi!");
      // Başarı mesajı veya form temizleme işlemleri
    })
    .catch(function(error) {
      console.error("Veri eklenirken hata oluştu:", error); // Hata burada mı oluşuyor?
      // Hata mesajı göster
    });

   console.log("yeniMusteriEkle fonksiyonu bitti.");
}
