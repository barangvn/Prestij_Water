<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js";
  import { getDatabase, ref, set, onValue } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-database.js";

  const firebaseConfig = {
    apiKey: "AIzaSyAmW3qdlm49cvfVeP27DaAMGJwtKDJ6kyI",
    authDomain: "prestij-water.firebaseapp.com",
    databaseURL: "https://prestij-water-default-rtdb.firebaseio.com",
    projectId: "prestij-water",
    storageBucket: "prestij-water.firebasestorage.app",
    messagingSenderId: "712467125722",
    appId: "1:712467125722:web:e845679e5d456fda2f5ce3",
    measurementId: "G-G0ZYR03RVL"
  };

  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);

  // Örnek yazma fonksiyonu
  window.veriKaydet = function() {
    const deger = document.getElementById("veriInput").value;
    set(ref(db, "veri/mesaj"), {
      metin: deger
    });
  };

  // Örnek okuma fonksiyonu
  onValue(ref(db, "veri/mesaj"), (snapshot) => {
    const veri = snapshot.val();
    if (veri && veri.metin) {
      document.getElementById("veriGoster").innerText = veri.metin;
    }
  });
</script>
</body>
</html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Su Arıtma Takip Sistemi</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
        }
        /* Custom scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; border-radius: 10px; }
        ::-webkit-scrollbar-thumb { background: #888; border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: #555; }

        /* Button transitions */
        button, input[type="submit"], select, input[type="search"] {
            transition: all 0.2s ease; /* Smoother transitions */
        }
        button:active, input[type="submit"]:active { transform: scale(0.98); }

        /* Modal base styles */
        .modal {
            display: none; position: fixed; z-index: 1000;
            left: 0; top: 0; width: 100%; height: 100%;
            overflow: auto; background-color: rgba(0,0,0,0.5); /* Darker overlay */
            padding-top: 60px; /* Space from top */
        }
        .modal-content {
            background-color: #fefefe; margin: auto; padding: 25px;
            border: 1px solid #e5e7eb; width: 90%; max-width: 750px; /* Slightly wider */
            border-radius: 8px; position: relative;
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }
        .modal-close-button { /* Renamed for clarity */
            color: #9ca3af; position: absolute; top: 15px; right: 20px;
            font-size: 28px; font-weight: bold; cursor: pointer;
            line-height: 1;
        }
        .modal-close-button:hover, .modal-close-button:focus { color: #1f2937; }

        /* Table styles */
        .table-container { overflow-x: auto; }
        table { width: 100%; border-collapse: collapse; }
        th, td { padding: 10px 12px; text-align: left; border-bottom: 1px solid #e5e7eb; font-size: 0.875rem; vertical-align: middle; /* Align vertically */ }
        th { background-color: #f9fafb; font-weight: 600; color: #4b5563; }
        tbody tr:hover { background-color: #f9fafb; }

        /* Low stock warning */
        .low-stock-warning { background-color: #fef3c7; color: #92400e; font-weight: 500; }

        /* Input focus styles */
        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: #4f46e5;
            box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.2);
        }
        /* Style for multi-select */
        select[multiple] {
            height: auto; /* Adjust height based on content */
            min-height: 80px; /* Minimum height */
            background-color: white;
        }
        select[multiple] option {
            padding: 5px;
        }
        /* Style for search input */
        input[type="search"] {
            appearance: none; /* Remove default search icon */
            padding-right: 2.5rem; /* Space for custom icon */
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='%239ca3af'%3E%3Cpath fill-rule='evenodd' d='M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z' clip-rule='evenodd' /%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 0.75rem center;
            background-size: 1rem 1rem;
        }

    </style>
</head>
<body class="p-4 md:p-8">

    <h1 class="text-3xl font-bold mb-8 text-center text-gray-800">Su Arıtma Takip Sistemi</h1>

    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">

        <div class="bg-white p-6 rounded-lg shadow-md flex flex-col">
            <h2 class="text-2xl font-semibold mb-4 text-gray-700 border-b pb-2">Müşteri Yönetimi</h2>

            <div class="mb-4">
                <label for="musteri-arama" class="sr-only">Müşteri Ara</label> <input type="search" id="musteri-arama" placeholder="Müşteri Adı veya Telefon No Ara..." class="block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm sm:text-sm focus:ring-indigo-500 focus:border-indigo-500">
            </div>

            <button id="yeni-musteri-goster-btn" class="mb-4 w-full inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
                + Yeni Müşteri Ekle
            </button>
            <form id="musteri-form" class="space-y-4 mb-6 hidden"> <h3 class="text-lg font-medium text-gray-600">Yeni Müşteri Bilgileri</h3>
                <div>
                    <label for="musteri-ad" class="block text-sm font-medium text-gray-700">Ad Soyad</label>
                    <input type="text" id="musteri-ad" required class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm sm:text-sm">
                </div>
                <div>
                    <label for="musteri-tel" class="block text-sm font-medium text-gray-700">Telefon Numarası *</label>
                    <input type="tel" id="musteri-tel" required class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm sm:text-sm" placeholder="örn: 5xxxxxxxxx">
                </div>
                <div>
                    <label for="musteri-adres" class="block text-sm font-medium text-gray-700">Adres</label>
                    <textarea id="musteri-adres" rows="2" required class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm sm:text-sm"></textarea>
                </div>
                 <div>
                    <label for="musteri-cihaz" class="block text-sm font-medium text-gray-700">Kullanılan Cihaz Adı</label>
                    <input type="text" id="musteri-cihaz" required class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm sm:text-sm" placeholder="örn: Model XYZ Ters Ozmoz">
                </div>
                 <div>
                    <label for="musteri-teknisyen" class="block text-sm font-medium text-gray-700">Varsayılan Teknisyen</label>
                    <input type="text" id="musteri-teknisyen" required class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm sm:text-sm" placeholder="örn: Ahmet Yılmaz">
                </div>
                <div class="flex justify-end space-x-2">
                     <button type="button" id="yeni-musteri-iptal-btn" class="py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
                        İptal
                     </button>
                    <button type="submit" class="inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
                        Müşteriyi Kaydet
                    </button>
                </div>
            </form>

             <h3 class="text-lg font-medium text-gray-600 mb-2 mt-4">Mevcut Müşteriler</h3>
            <div class="table-container flex-grow border rounded-md overflow-hidden">
                 <table class="min-w-full divide-y divide-gray-200">
                     <thead class="bg-gray-100 sticky top-0">
                         <tr>
                             <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Ad Soyad</th>
                             <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Telefon</th>
                             <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">İşlemler</th>
                         </tr>
                     </thead>
                     <tbody id="musteri-listesi" class="bg-white divide-y divide-gray-200">
                         <tr><td colspan="3" class="text-center py-10 text-gray-500">Henüz müşteri eklenmemiş veya arama sonucu bulunamadı.</td></tr>
                     </tbody>
                 </table>
            </div>
        </div>

        <div class="bg-white p-6 rounded-lg shadow-md flex flex-col">
            <h2 class="text-2xl font-semibold mb-4 text-gray-700 border-b pb-2">Stok Yönetimi</h2>

              <button id="yeni-urun-goster-btn" class="mb-4 w-full inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500">
                + Yeni Ürün Ekle
            </button>
            <form id="stok-form" class="space-y-4 mb-6 hidden"> <h3 class="text-lg font-medium text-gray-600">Yeni Ürün Bilgileri</h3>
                <div>
                    <label for="urun-ad" class="block text-sm font-medium text-gray-700">Ürün Adı</label>
                    <input type="text" id="urun-ad" required class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm sm:text-sm" placeholder="örn: 5 Mikron Sediment Filtre">
                </div>
                 <div class="grid grid-cols-2 gap-4">
                     <div>
                         <label for="stok-miktar" class="block text-sm font-medium text-gray-700">Stok Miktarı</label>
                         <input type="number" id="stok-miktar" required min="0" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm sm:text-sm">
                     </div>
                     <div>
                         <label for="min-stok" class="block text-sm font-medium text-gray-700">Min. Stok Seviyesi</label>
                         <input type="number" id="min-stok" required min="0" value="0" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm sm:text-sm">
                     </div>
                 </div>
                 <div class="flex justify-end space-x-2">
                      <button type="button" id="yeni-urun-iptal-btn" class="py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
                         İptal
                      </button>
                     <button type="submit" class="inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500">
                         Ürünü Stoklara Ekle
                     </button>
                 </div>
            </form>

            <h3 class="text-lg font-medium text-gray-600 mb-2 mt-4">Stok Durumu</h3>
             <div class="table-container flex-grow border rounded-md overflow-hidden">
                 <table class="min-w-full divide-y divide-gray-200">
                     <thead class="bg-gray-100 sticky top-0">
                         <tr>
                             <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Ürün Adı
                               set(ref(db, 'musteriler'), {
  ad: musteriAd,
  tel: musteriTel,
  // ... diğer veriler
})
.then(() => {
  console.log("Müşteri başarıyla kaydedildi!");
  // Başarılı işlem sonrası yapılacaklar (formu temizle, mesaj göster vb.)
})
.catch((error) => {
  console.error("Müşteri kaydedilirken bir hata oluştu:", error);
  alert("Müşteri kaydedilirken bir hata oluştu.");
  // Hata durumunda kullanıcıya bilgi verme
});
                               const musteriForm = document.getElementById('musteri-form');
musteriForm.addEventListener('submit', function(event) {
  event.preventDefault();

  const musteriAd = document.getElementById('musteri-ad').value;
  const musteriTel = document.getElementById('musteri-tel').value;
  const musteriAdres = document.getElementById('musteri-adres').value;
  const musteriCihaz = document.getElementById('musteri-cihaz').value;
  const musteriTeknisyen = document.getElementById('musteri-teknisyen').value;

  set(ref(db, 'musteriler'), {
    ad: musteriAd,
    tel: musteriTel,
    adres: musteriAdres,
    cihaz: musteriCihaz,
    teknisyen: musteriTeknisyen
  })
  .then(() => {
    console.log("Müşteri başarıyla kaydedildi!");
    alert("Müşteri başarıyla kaydedildi!");
    musteriForm.reset();
    document.getElementById('yeni-musteri-goster-btn').click(); // Formu gizle
    musterileriOkuVeGoster(); // Müşteri listesini güncelle
  })
  .catch((error) => {
    console.error("Müşteri kaydedilirken bir hata oluştu:", error);
    alert("Müşteri kaydedilirken bir hata oluştu: " + error.message);
  });
});
                               function musterileriOkuVeGoster() {
  onValue(ref(db, 'musteriler'), (snapshot) => {
    const data = snapshot.val();
    musteriler = data ? Object.values(data) : []; // Verileri bir diziye dönüştür
    musterileriGoster(); // HTML'de gösterme fonksiyonunu çağır
  });
}
                               
