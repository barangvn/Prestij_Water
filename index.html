<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Su ArÄ±tma Takip Sistemi</title>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>
  <style>
    body {
      margin: 0;
      font-family: sans-serif;
      display: flex;
      height: 100vh;
    }
    .left, .right {
      width: 50%;
      padding: 20px;
      box-sizing: border-box;
      overflow-y: auto;
    }
    .left {
      background-color: #f0f8ff;
      border-right: 2px solid #ccc;
    }
    .right {
      background-color: #fffbe6;
    }
    h2 {
      margin-top: 0;
    }
    input, button {
      margin: 5px 0;
      padding: 5px;
      width: 100%;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
    }
    th, td {
      border: 1px solid #aaa;
      padding: 5px;
      text-align: left;
    }
  </style>
</head>
<body>

  <!-- SOL: MÃœÅžTERÄ°LER -->
  <div class="left">
    <h2>MÃ¼ÅŸteri Ekle</h2>
    <input type="text" id="ad" placeholder="Ad Soyad" />
    <input type="text" id="telefon" placeholder="Telefon" />
    <input type="text" id="adres" placeholder="Adres" />
    <button onclick="musteriEkle()">Ekle</button>

    <h2>MÃ¼ÅŸteri Listesi</h2>
    <table id="musteriTable">
      <thead>
        <tr><th>Ad</th><th>Telefon</th><th>Adres</th></tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <!-- SAÄž: STOK -->
  <div class="right">
    <h2>Stok Ekle</h2>
    <input type="text" id="urun" placeholder="ÃœrÃ¼n AdÄ±" />
    <input type="number" id="adet" placeholder="Adet" />
    <button onclick="stokEkle()">Stok Ekle</button>

    <h2>Stok Listesi</h2>
    <table id="stokTable">
      <thead>
        <tr><th>ÃœrÃ¼n</th><th>Adet</th></tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <!-- Firebase ve JS -->
  <script>
    // ðŸ”¥ Firebase AyarlarÄ±
    const firebaseConfig = {
      apiKey: "AIzaSyAmW3qdlm49cvfVeP27DaAMGJwtKDJ6kyI",
      authDomain: "prestij-water.firebaseapp.com",
      databaseURL: "https://prestij-water-default-rtdb.firebaseio.com",
      projectId: "prestij-water",
      storageBucket: "prestij-water.firebasestorage.app",
      messagingSenderId: "712467125722",
      appId: "1:712467125722:web:e845679e5d456fda2f5ce3",
      measurementId: "G-G0ZYR03RVL"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // MÃœÅžTERÄ° EKLE
    function musteriEkle() {
      const ad = document.getElementById("ad").value;
      const telefon = document.getElementById("telefon").value;
      const adres = document.getElementById("adres").value;
      if (ad && telefon && adres) {
        const yeniRef = db.ref("musteriler").push();
        yeniRef.set({ ad, telefon, adres });
      }
    }

    // MÃœÅžTERÄ°LERÄ° LÄ°STELE
    db.ref("musteriler").on("value", (snapshot) => {
      const tbody = document.querySelector("#musteriTable tbody");
      tbody.innerHTML = "";
      snapshot.forEach((child) => {
        const data = child.val();
        const tr = document.createElement("tr");
        tr.innerHTML = `<td>${data.ad}</td><td>${data.telefon}</td><td>${data.adres}</td>`;
        tbody.appendChild(tr);
      });
    });

    // STOK EKLE
    function stokEkle() {
      const urun = document.getElementById("urun").value;
      const adet = document.getElementById("adet").value;
      if (urun && adet) {
        const yeniRef = db.ref("stok").push();
        yeniRef.set({ urun, adet: parseInt(adet) });
      }
    }

    // STOKLARI LÄ°STELE
    db.ref("stok").on("value", (snapshot) => {
      const tbody = document.querySelector("#stokTable tbody");
      tbody.innerHTML = "";
      snapshot.forEach((child) => {
        const data = child.val();
        const tr = document.createElement("tr");
        tr.innerHTML = `<td>${data.urun}</td><td>${data.adet}</td>`;
        tbody.appendChild(tr);
      });
    });
  </script>

</body>
</html>
{
  "musteriler": {
    "m1": {
      "ad": "Ahmet YÄ±lmaz",
      "telefon": "0555...",
      "adres": "Ä°stanbul",
      "gecmis": {
        "bakim": ["01-01-2024", "03-05-2025"],
        "montaj": ["12-12-2023"],
        "ariza": []
      },
      "urunler": {
        "u1": 1,
        "u2": 2
      }
    }
  },
  "stok": {
    "u1": {
      "ad": "Filtre",
      "adet": 20,
      "kritik": 5
    },
    "u2": {
      "ad": "Pompa",
      "adet": 7,
      "kritik": 3
    }
  }
}
